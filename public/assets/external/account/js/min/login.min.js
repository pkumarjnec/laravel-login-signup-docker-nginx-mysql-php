$(".profile-select").select2();var freeCredit=!1;function login(){if(1==validateFields("frmLogin"))return!1;$("#login-btn").html('Requesting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>');$.ajax({type:"POST",url:"/oauth/login",data:$(".frmLogin").serialize(),success:function(e){if($("#login-btn").html("Login"),"success"==e.status){var s={Email:e.account.emailid,FirstName:e.account.firstName,LastName:e.account.lastName},n={prevLoggedIn:e.account.prevLoggedIn};bkCampaign("","login",s,n),showMessage(e.message,"valid"),1==e.id?($(".verifyForm").removeClass("d-none"),$(".loginForm").addClass("d-none"),$("#token").val(e.token)):2==e.id?($(".verifyForm").addClass("d-none"),$(".loginForm").addClass("d-none"),$(".profileForm").removeClass("d-none"),$(".profile-select").select2()):($("#login-btn").html('Redirecting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>'),setTimeout(function(){window.location.href=e.redirectUrl},1e3))}else showMessage(e.message,"invalid")},error:function(e,s){$("#login-btn").html("Login"),$.each(e.responseJSON.errors,function(e,s){showMessage(s,"invalid")})}})}function verify(){$("#verify-btn").html('Requesting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>');$.ajax({type:"POST",url:"/oauth/verify",data:$(".frmVerify").serialize(),success:function(e){$("#verify-btn").html("Verify"),2==e.id?(showMessage(e.message,"valid"),$(".verifyForm").addClass("d-none"),$(".profileForm").removeClass("d-none"),$(".profile-select").select2()):"success"==e.status?(showMessage(e.message,"valid"),$("#verify-btn").html('Redirecting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>'),setTimeout(function(){window.location.href=e.redirectUrl},1e3)):showMessage(e.message,"invalid")},error:function(e,s){$("#verify-btn").html("Verify"),$.each(e.responseJSON.errors,function(e,s){showMessage(s,"invalid")})}})}function signup(){if(1==validateFields("frmSignup"))return!1;$("#signup-btn").html('Requesting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>');$.ajax({type:"POST",url:"/oauth/signup",data:$(".frmSignup").serialize(),success:function(e){$("#signup-btn").html("Sign up"),"success"==e.status?1==e.id?(showMessage(e.message,"valid"),$(".verifyForm").removeClass("d-none"),$(".signupForm").addClass("d-none"),$("#token").val(e.token)):2==e.id?($(".verifyForm").addClass("d-none"),$(".signupForm").addClass("d-none"),$(".profileForm").removeClass("d-none"),$(".profile-select").select2()):($("#signup-btn").html('Redirecting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>'),setTimeout(function(){window.location.href=e.redirectUrl},1e3)):showMessage(e.message,"invalid")},error:function(e,s){$("#signup-btn").html("Sign up"),$.each(e.responseJSON.errors,function(e,s){showMessage(s,"invalid")})}})}function resetPassword(){$("#reset-btn").html('Requesting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>');$.ajax({type:"POST",url:"/oauth/reset",data:$(".frmReset").serialize(),success:function(e){$("#reset-btn").html("Reset"),"success"==e.status?(showMessage(e.message,"valid"),1==e.id?($(".verifyForm").removeClass("d-none"),$(".resetForm").addClass("d-none"),$("#token").val(e.token)):2==e.id?($(".verifyForm").addClass("d-none"),$(".resetForm").addClass("d-none"),$(".profileForm").removeClass("d-none"),$(".profile-select").select2()):($("#reset-btn").html('Redirecting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>'),setTimeout(function(){window.location.href=e.redirectUrl},1e3))):showMessage(e.message,"invalid")},error:function(e,s){$("#signup-btn").html("Sign up"),$.each(e.responseJSON.errors,function(e,s){showMessage(s,"invalid")})}})}function resendEmail(){$(".error-message").parent().addClass("d-none");$.ajax({type:"POST",url:"/oauth/resend-email",data:$(".frmVerify").serialize(),success:function(e){"success"==e.status?($("#token").val(e.token),showMessage(e.message,"valid")):showMessage(e.message,"invalid")},error:function(e,s){$("#signup-btn").html("Sign up"),$.each(e.responseJSON.errors,function(e,s){showMessage(s,"invalid")})}})}function profile(){if(1==validateFields("frmProfile"))return!1;$("#profile-btn").html('Requesting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>');$.ajax({type:"POST",url:"/oauth/profile",data:$(".frmProfile").serialize(),success:function(e){if($("#profile-btn").html("Proceed"),"success"==e.status)if(1==e.id)showMessage(e.message,"valid"),$(".verifyForm").removeClass("d-none"),$(".signupForm").addClass("d-none"),$("#token").val(e.token);else{var s={Email:e.account.emailid,FirstName:e.account.firstName,LastName:e.account.lastName};""!=freeCredit?bkCampaign("","freesignup",s,""):bkCampaign("","signup",s,""),$("#signup-btn").html('Redirecting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>'),setTimeout(function(){window.location.href=e.redirectUrl},1e3)}else showMessage(e.message,"invalid")},error:function(e,s){$("#signup-btn").html("Sign up"),$.each(e.responseJSON.errors,function(e,s){showMessage(s,"invalid")})}})}function googleSignup(e){$.ajax({type:"POST",url:"/oauth/login-with-google",data:"token="+e.getAuthResponse().id_token,success:function(e){"success"==e.status?(showMessage(e.message,"valid"),gapi.auth2.getAuthInstance().signOut(),1==e.id?($(".verifyForm").removeClass("d-none"),$(".loginForm").addClass("d-none"),$(".signupForm").addClass("d-none"),$("#token").val(e.token)):2==e.id?($(".verifyForm").addClass("d-none"),$(".loginForm").addClass("d-none"),$(".signupForm").addClass("d-none"),$(".profileForm").removeClass("d-none"),$(".profile-select").select2(),$("#name").val(e.name)):($("#login-btn").html('Redirecting <span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>'),setTimeout(function(){window.location.href=e.redirectUrl},1e3))):showMessage(e.message,"invalid")}})}function renderButton(){$(".abcRioButtonContents span").text("Google"),$(".abcRioButtonContents span").css("font-size","16px"),$(".abcRioButtonContents span").css("font-family",'"Lato", "Helvetica Neue", Helvetica, Arial, sans-serif;')}$("#signupLink").on("click",function(){window.history.pushState("","","/signup"),$(".loginForm").addClass("d-none"),$(".signupForm").removeClass("d-none"),$(".resetForm").addClass("d-none")}),$("#loginLink").on("click",function(){window.history.pushState("","","/login"),$(".loginForm").removeClass("d-none"),$(".signupForm").addClass("d-none"),$(".resetForm").addClass("d-none")}),$("#resetLink").on("click",function(){window.history.pushState("","","/reset-password"),$(".loginForm").addClass("d-none"),$(".signupForm").addClass("d-none"),$(".resetForm").removeClass("d-none")}),$(".symbol2").on("mouseover",function(){$(this).parent().parent().find("input").attr("type","text")}),$(".symbol2").on("mouseout",function(){$(this).parent().parent().find("input").attr("type","password")}),$("form").keydown(function(e){if(13===e.which){var s=$(this).attr("name");"frmLogin"==s?login():"frmSignup"==s?signup():"frmVerify"==s?verify():"frmReset"==s?resetPassword():"frmProfile"==s&&profile()}});